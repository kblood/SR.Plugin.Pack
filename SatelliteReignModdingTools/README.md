# Satellite Reign Modding Tools

## Overview

The Satellite Reign Modding Tools is a comprehensive Windows Forms application designed to browse, analyze, and manage exported game data from the LoadCustomData mod. It provides intuitive interfaces for examining game content and planning modifications.

## üöÄ Features

### 1. Quest Browser
- **Complete Quest Visualization**: Browse all exported quests and missions
- **Quest Details Panel**: View comprehensive quest information including:
  - Quest IDs, titles, and completion status
  - District assignments and location data
  - Quest descriptions and localized text
  - Sub-quest relationships and dependencies
  - Hidden quest flags and debrief settings
- **Search and Filter**: Find specific quests by name, ID, or district
- **Real-time Refresh**: Reload quest data without restarting the application

### 2. Item Browser
- **Equipment Database**: Browse all weapons, equipment, and items
- **Item Details**: View complete item specifications
- **Category Filtering**: Filter by item type and category
- **Visual Preview**: Display item icons and textures

### 3. Mission Browser  
- **Mission Management**: Analyze mission structure and objectives
- **Mission Flow**: Understand quest progression and dependencies
- **Objective Tracking**: View mission objectives and completion criteria

### 4. Enemy Browser
- **Enemy Database**: Browse enemy types and specifications
- **Combat Analysis**: View enemy stats and capabilities
- **Spawn Information**: Understand enemy placement and behavior

### 5. Economy & Weapons Browser
- **Weapon Data Management**: Browse and edit weapon statistics from `weapons.xml`
- **Complete Weapon Stats**: View damage, range, reload time, magazine size, and all weapon properties
- **Ammunition Details**: Examine different ammo types and their characteristics
- **Weapon Validation**: Built-in validation to check for data integrity issues
- **Search and Filter**: Find weapons by name or type
- **PropertyGrid Editor**: Edit weapon values using intuitive property interface
- **XML Export/Import**: Save modified weapon data back to `weapons.xml`

## üõ† Installation and Setup

### Prerequisites
- .NET Framework 4.8 or higher
- LoadCustomData mod installed and configured
- Exported game data files (generated by LoadCustomData mod)
  - `itemDefinitions.xml` - Item database
  - `translations.xml` - Translation data  
  - `questDefinitions.xml` - Quest data
  - `weapons.xml` - Weapon statistics (LoadCustomData v2.1+)
  - `enemyentries.xml` - Enemy spawn data

### Building the Application
```bash
cd "c:\Modding\SR.Plugin.Pack\SatelliteReignModdingTools"
msbuild SatelliteReignModdingTools.csproj
```

### Running the Application
1. Build the project as described above
2. Run the executable from `bin\Debug\SatelliteReignModdingTools.exe`
3. The application will look for data files in the current directory

## üìñ Usage Guide

### Quick Start Usage

1. **Export Game Data**:
   - Launch Satellite Reign with LoadCustomData mod
   - Press **F10** in-game to export all data types
   - Files will be created in `<SatelliteReign>/Mods/` directory

2. **Launch Modding Tools**:
   - Run `SatelliteReignModdingTools.exe`
   - Place exported XML files in the same directory as the executable
   - Use the main menu to access different browsers

3. **Browse Different Data Types**:
   - **Quest Browser**: Browse missions and quests (`questDefinitions.xml`)
   - **Item Browser**: View weapons, equipment, items (`itemDefinitions.xml`)
   - **Economy & Weapons**: Edit weapon stats and balance (`weapons.xml`)
   - **Enemy Browser**: Examine enemy types and spawns (`enemyentries.xml`)
   - **Translations Browser**: Manage game text (`translations.xml`)

### Economy & Weapons Browser Usage

1. **Load Weapon Data**:
   - Export weapons using LoadCustomData mod (F10 in-game)
   - Place `weapons.xml` in the modding tools directory
   - Click "Economy Browser" from main menu

2. **Edit Weapons**:
   - Select a weapon from the left list
   - Edit properties in the PropertyGrid on the right
   - Modify damage, range, reload time, magazine size, etc.

3. **Save Changes**:
   - Click the "Save" button in the toolbar
   - Modified `weapons.xml` will be saved
   - Import back into game using LoadCustomData (F9 in-game)

### Data File Locations

The application expects exported data files in the following locations:
- **Quest Data**: `questDefinitions.xml`
- **Item Data**: `itemDefinitions.xml` 
- **Weapon Data**: `weapons.xml` *(NEW in v2.1)*
- **Translation Data**: `translations.xml`
- **Enemy Data**: `enemyentries.xml`
- **Sprite Data**: `icons/` folder with PNG files

## üîß Technical Details

### Supported File Formats
- **XML Files**: All data files use XML serialization format
- **Image Files**: PNG format for sprites and textures
- **Encoding**: UTF-8 encoding for all text data

### XML Structure Compatibility
The Quest Browser is specifically designed to work with the XML format generated by LoadCustomData Enhanced v3.0, which includes:
- Lowercase boolean values (`true`/`false` instead of `True`/`False`)
- Proper XML serialization attributes for arrays and objects
- CDATA sections for text content to handle special characters

### .NET Framework Compatibility
- Built targeting .NET Framework 4.8
- Compatible with Windows Forms applications
- Uses System.Xml.Serialization for data parsing

## üêõ Troubleshooting

### Quest Browser Won't Load Data
1. **Check File Location**: Ensure `questDefinitions.xml` exists in the application directory
2. **Verify Export**: Re-export quest data using LoadCustomData mod (press F4)
3. **XML Format**: Ensure you're using LoadCustomData Enhanced v3.0 or later
4. **File Permissions**: Check that the application has read access to the XML files

### XML Parsing Errors
- **Danish Error "Der er en fejl i XML-dokumentet"**: This indicates XML format issues
- **Line 7, Character 6 Error**: Usually caused by boolean capitalization issues
- **Solution**: Re-export data with LoadCustomData Enhanced v3.0+ which fixes boolean serialization

### Empty Quest List
1. **No Quest Data**: The game may not have initialized quest data yet
2. **Export Timing**: Try exporting after loading a save game or starting a new game
3. **File Size**: Check if `questDefinitions.xml` has content (should be several KB)

## üîÑ Integration with LoadCustomData Mod

### Data Flow
```
Satellite Reign Game
        ‚Üì (F4 key press)
LoadCustomData Mod 
        ‚Üì (exports XML)
questDefinitions.xml
        ‚Üì (loaded by)
Quest Browser
```

### Version Compatibility
- **LoadCustomData Enhanced v3.0+**: Full compatibility with all features
- **Earlier Versions**: May have XML format issues requiring mod updates

## üìù Recent Updates

### Quest Browser Enhancements
- **XML Parsing Fixes**: Resolved boolean serialization compatibility issues
- **Error Handling**: Improved error messages and debugging information
- **Auto-refresh**: Added refresh functionality for updated exports
- **Search and Filter**: Enhanced quest finding capabilities

### LoadCustomData Integration
- **Automatic Quest Tree Initialization**: Quest export now handles uninitialized quest systems
- **Boolean Format Fix**: XML now generates lowercase booleans for proper parsing
- **.NET Framework Compatibility**: Fixed reflection issues for Unity 5.3.5 compatibility

## ü§ù Contributing

When contributing to the modding tools:
1. Maintain .NET Framework 4.8 compatibility
2. Use Windows Forms for UI components
3. Follow the existing XML serialization patterns
4. Test with actual exported game data
5. Update documentation for new features

## üìÑ License

This project is part of the Satellite Reign modding framework. Please refer to the main project license for usage terms.